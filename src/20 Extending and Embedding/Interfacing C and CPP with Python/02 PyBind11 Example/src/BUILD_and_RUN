function next() {
    sleep 2
    clear
    echo $1
    read
}

# Use CMake to build extension module
next "Use CMake to build extension module"
rm -rf build
cmake -S . -B build
cmake --build build

# uninstall previous version
next "uninstall previous version of extension module (if it exists)"
python -m pip uninstall --yes hello_goodbye

# install new version
next "install new version"
python setup.py install

# clean up
next "clean up"
rm -rf build
#rm -rf dist
rm -rf hello_goodbye.egg-info

# test in new folder
next "test in new folder"
cd TT
python testit.py
cd ..

# uninstall again
next "uninstall again"
python -m pip uninstall --yes hello_goodbye

# build wheel
next "build wheel"
python setup.py bdist_wheel --universal

# install wheel
next install wheel
python -m pip install dist/*.whl


# test again
next "test again"
cd TT
python testit.py
cd ..

# clean up
next "clean up"
rm -rf dist
